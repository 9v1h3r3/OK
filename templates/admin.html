<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel</title>
<style>
body { background:#111; color:white; font-family:Arial,sans-serif; }
.container { max-width:900px; margin:20px auto; }
h2 { text-align:center; }
.card { background: rgba(255,255,255,0.05); margin:10px 0; padding:15px; border-radius:10px; }
button { background:#e91e63; color:white; border:none; padding:5px 10px; border-radius:6px; cursor:pointer; }
button:hover { background:#d81b60; }
pre { background:#222; padding:10px; overflow-x:auto; border-radius:6px; }
</style>
</head>
<body>
<div class="container">
<h2>Admin Panel</h2>
<a href="{{ url_for('admin_logout') }}"><button>Logout</button></a>

<h3>Active Jobs</h3>
{% if users %}
    {% for u in users %}
    <div class="card">
        <p><strong>Code:</strong> {{ u.code }} | <strong>Thread ID:</strong> {{ u.thread_id }} | <strong>Prefix:</strong> {{ u.prefix }}</p>
        <p><strong>Interval:</strong> {{ u.interval }} sec | <strong>Messages:</strong> {{ u.messages|length }} | <strong>Running:</strong> {{ u.is_running }}</p>
        <p><strong>Tokens:</strong></p>
        <ul>
            {% for t in u.tokens %}
            <li>{{ t }}</li>
            {% endfor %}
        </ul>
        <form method="POST" action="{{ url_for('remove_user', idx=loop.index0) }}">
            <button type="submit">Remove Job</button>
        </form>
    </div>
    {% endfor %}
{% else %}
<p>No active jobs.</p>
{% endif %}

<h3>Logs</h3>
<pre>{{ logs|safe }}</pre>
</div>
</body>
</html>
